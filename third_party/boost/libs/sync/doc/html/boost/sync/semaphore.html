<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Class semaphore</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="Chapter 1. Boost.Sync v1">
<link rel="up" href="../../sync/reference.html#header.boost.sync.semaphore_hpp" title="Header &lt;boost/sync/semaphore.hpp&gt;">
<link rel="prev" href="../../sync/reference.html" title="Reference">
<link rel="next" href="../../locks.html" title="Locks">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../../sync/reference.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../sync/reference.html#header.boost.sync.semaphore_hpp"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../../locks.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="boost.sync.semaphore"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class semaphore</span></h2>
<p>boost::sync::semaphore</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../../sync/reference.html#header.boost.sync.semaphore_hpp" title="Header &lt;boost/sync/semaphore.hpp&gt;">boost/sync/semaphore.hpp</a>&gt;

</span>
<span class="keyword">class</span> <a class="link" href="semaphore.html" title="Class semaphore">semaphore</a> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="comment">// <a class="link" href="semaphore.html#boost.sync.semaphoreconstruct-copy-destruct">construct/copy/destruct</a></span>
  <span class="keyword">explicit</span> <a class="link" href="semaphore.html#idm324-bb"><span class="identifier">semaphore</span></a><span class="special">(</span><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="semaphore.html#idm341-bb"><span class="identifier">semaphore</span></a><span class="special">(</span><span class="identifier">semaphore</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <span class="identifier">semaphore</span> <span class="special">&amp;</span> <a class="link" href="semaphore.html#idm344-bb"><span class="keyword">operator</span><span class="special">=</span></a><span class="special">(</span><span class="identifier">semaphore</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <a class="link" href="semaphore.html#idm335-bb"><span class="special">~</span><span class="identifier">semaphore</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="semaphore.html#idm228-bb">public member functions</a></span>
  <span class="keyword">void</span> <a class="link" href="semaphore.html#idm229-bb"><span class="identifier">post</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="semaphore.html#idm240-bb"><span class="identifier">wait</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="semaphore.html#idm248-bb"><span class="identifier">try_wait</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> Time<span class="special">&gt;</span> <span class="keyword">bool</span> <a class="link" href="semaphore.html#idm258-bb"><span class="identifier">timed_wait</span></a><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Time</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> Duration<span class="special">&gt;</span> <span class="keyword">bool</span> <a class="link" href="semaphore.html#idm280-bb"><span class="identifier">wait_for</span></a><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Duration</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> TimePoint<span class="special">&gt;</span> <span class="keyword">bool</span> <a class="link" href="semaphore.html#idm302-bb"><span class="identifier">wait_until</span></a><span class="special">(</span><span class="keyword">const</span> <span class="identifier">TimePoint</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
<span class="special">}</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="idm365"></a><h2>Description</h2>
<div class="refsect2">
<a name="idm367"></a><h3>
<a name="boost.sync.semaphoreconstruct-copy-destruct"></a><code class="computeroutput">semaphore</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="keyword">explicit</span> <a name="idm324-bb"></a><span class="identifier">semaphore</span><span class="special">(</span><span class="keyword">unsigned</span> <span class="keyword">int</span> initial_count <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span></pre>
<p>Constructs a semaphore object.</p>
<p>
<span class="bold"><strong>Throws:</strong></span> if an error occurs. </p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">initial_count</code></span></p></td>
<td><p>The initial value of the semaphore. There may be an implementation-defined upper limit for the counter value, but it is safe to assume that values up to <code class="computeroutput">INT_MAX</code> are supported.</p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem"><pre class="literallayout"><a name="idm341-bb"></a><span class="identifier">semaphore</span><span class="special">(</span><span class="identifier">semaphore</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><span class="identifier">semaphore</span> <span class="special">&amp;</span> <a name="idm344-bb"></a><span class="keyword">operator</span><span class="special">=</span><span class="special">(</span><span class="identifier">semaphore</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span></pre></li>
<li class="listitem">
<pre class="literallayout"><a name="idm335-bb"></a><span class="special">~</span><span class="identifier">semaphore</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Destroys the object</p>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">Requires:</span></p></td>
<td><p>No thread is waiting on the semaphore </p></td>
</tr></tbody>
</table></div>
</li>
</ol></div>
</div>
<div class="refsect2">
<a name="idm444"></a><h3>
<a name="idm228-bb"></a><code class="computeroutput">semaphore</code> public member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="idm229-bb"></a><span class="identifier">post</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Increments the semaphore counter. If one or multiple threads are blocked waiting for the semaphore, then one of these threads returns successfully from its wait function. It is unspecified which thread is released from the wait function.</p>
<p><span class="bold"><strong>Memory</strong></span> Ordering: release</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>The implementation may have an upper limit for the semaphore counter, upon exceeding which the behavior is unspecified. It is safe to assume that values up to <code class="computeroutput">INT_MAX</code> are supported.</p></td></tr>
</table></div>
<p>
<span class="bold"><strong>Throws:</strong></span> if an error occurs. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="idm240-bb"></a><span class="identifier">wait</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>If the semaphore counter is greater than zero, decrements the counter and returns. If the semaphore value is not greater than zero, then the calling thread blocks until it can decrement the counter.</p>
<p><span class="bold"><strong>Memory</strong></span> Ordering: acquire</p>
<p><span class="bold"><strong>Throws:</strong></span> if an error occurs. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="idm248-bb"></a><span class="identifier">try_wait</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>If the semaphore counter is greater than zero, decrements the counter and returns <code class="computeroutput">true</code>. If the semaphore value is not greater than zero, returns <code class="computeroutput">false</code>.</p>
<p><span class="bold"><strong>Memory</strong></span> Ordering: acquire, if successful, relaxed otherwise</p>
<p><span class="bold"><strong>Throws:</strong></span> if an error occurs. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> Time<span class="special">&gt;</span> <span class="keyword">bool</span> <a name="idm258-bb"></a><span class="identifier">timed_wait</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Time</span> <span class="special">&amp;</span> timeout<span class="special">)</span><span class="special">;</span></pre>
<p>If the semaphore counter is greater than zero, decrements the counter and returns <code class="computeroutput">true</code>. If the semaphore value is not greater than zero, then the calling thread blocks until it can decrement the counter or the specified timeout expires.</p>
<p><span class="bold"><strong>Memory</strong></span> Ordering: acquire, if successful, relaxed otherwise</p>
<p>

<span class="bold"><strong>Throws:</strong></span> if an error occurs.</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>In order to use this method, a supplementary header must be included from boost/sync/support to enable support for particular time units. </p></td></tr>
</table></div>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">timeout</code></span></p></td>
<td><p>The timeout for the operation to complete. The timeout can be specified either as an absolute time point or as a duration. In the latter case the time is measured according to the system clock.</p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>If the timeout expires, the function returns <code class="computeroutput">false</code>. If the semaphore counter is decremented, the function returns <code class="computeroutput">true</code>.</p></td>
</tr>
</tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> Duration<span class="special">&gt;</span> <span class="keyword">bool</span> <a name="idm280-bb"></a><span class="identifier">wait_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Duration</span> <span class="special">&amp;</span> duration<span class="special">)</span><span class="special">;</span></pre>
<p>If the semaphore counter is greater than zero, decrements the counter and returns <code class="computeroutput">true</code>. If the semaphore value is not greater than zero, then the calling thread blocks until it can decrement the counter or the specified timeout expires.</p>
<p><span class="bold"><strong>Memory</strong></span> Ordering: acquire, if successful, relaxed otherwise</p>
<p>

<span class="bold"><strong>Throws:</strong></span> if an error occurs.</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>In order to use this method, a supplementary header must be included from boost/sync/support to enable support for particular time units. </p></td></tr>
</table></div>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">duration</code></span></p></td>
<td><p>The timeout for the operation to complete. The timeout should be a duration, which is measured according to the system clock.</p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>If the timeout expires, the function returns <code class="computeroutput">false</code>. If the semaphore counter is decremented, the function returns <code class="computeroutput">true</code>.</p></td>
</tr>
</tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> TimePoint<span class="special">&gt;</span> <span class="keyword">bool</span> <a name="idm302-bb"></a><span class="identifier">wait_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">TimePoint</span> <span class="special">&amp;</span> timeout<span class="special">)</span><span class="special">;</span></pre>
<p>If the semaphore counter is greater than zero, decrements the counter and returns <code class="computeroutput">true</code>. If the semaphore value is not greater than zero, then the calling thread blocks until it can decrement the counter or the specified timeout expires.</p>
<p><span class="bold"><strong>Memory</strong></span> Ordering: acquire, if successful, relaxed otherwise</p>
<p>

<span class="bold"><strong>Throws:</strong></span> if an error occurs.</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>In order to use this method, a supplementary header must be included from boost/sync/support to enable support for particular time units. </p></td></tr>
</table></div>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">timeout</code></span></p></td>
<td><p>The timeout for the operation to complete. The timeout should be an absolute time point.</p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>If the timeout expires, the function returns <code class="computeroutput">false</code>. If the semaphore counter is decremented, the function returns <code class="computeroutput">true</code>.</p></td>
</tr>
</tbody>
</table></div>
</li>
</ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2013 Vicente J. Botet Escriba, Tim Blechmann<br>Copyright © 2013-2019 Andrey Semashev<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>).
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../../sync/reference.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../sync/reference.html#header.boost.sync.semaphore_hpp"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../../locks.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
